<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>MindGym</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b0f14"/>
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png">
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand"><span class="dot"></span>MindGym</div>
    <div class="stats">
      <span id="lvl">Lvl 1</span>
      <span id="xp">XP 0</span>
      <span id="streak">Streak 0</span>
    </div>
    <button id="btnSettings" class="pill">Settings</button>
  </header>

  <main class="container">
    <section class="hero card">
      <h1>Train your mind, daily.</h1>
      <p>Pick a module below. Earn XP, level up, and track streaks. Your progress is saved on your device.</p>
    </section>

    <section class="grid">
      <button class="tile" data-module="focus"><div class="title">Focus Tap</div><div class="sub">Tap the highlighted circle quickly.</div></button>
      <button class="tile" data-module="hunt"><div class="title">Circle Hunt</div><div class="sub">Find the odd circle among many.</div></button>
      <button class="tile" data-module="span"><div class="title">Visual Span</div><div class="sub">Repeat the flashing sequence.</div></button>
      <button class="tile" data-module="nback"><div class="title">N-Back <span class="beta">beta</span></div><div class="sub">Match current to N steps back.</div></button>
      <button class="tile" data-module="matrix"><div class="title">Matrix Mini (IQ)</div><div class="sub">Raven-style mini puzzles.</div></button>
      <button class="tile" data-module="noticing"><div class="title">Noticing 60s</div><div class="sub">Metacognition: notice & log fast.</div></button>
      <button class="tile" data-module="metacheck"><div class="title">Meta-Check</div><div class="sub">Quick self-monitor every 30s.</div></button>
      <button class="tile" data-module="journal"><div class="title">Micro-Journal</div><div class="sub">2-minute reflection with autosave.</div></button>
    </section>

    <section id="module" class="module card hidden">
      <div class="moduleHeader">
        <h2 id="moduleTitle">Module</h2>
        <div class="moduleControls">
          <button id="btnHow" class="btn ghost">How?</button>
          <button id="btnExit" class="btn">Exit</button>
        </div>
      </div>
      <div id="stage"></div>
      <div id="hud">
        <div id="hudLeft">
          <button id="btnStart" class="btn primary">Start</button>
          <button id="btnStop" class="btn">Stop</button>
        </div>
        <div id="hudRight">
          <span>Score: <b id="score">0</b></span>
          <span>Best: <b id="best">0</b></span>
        </div>
      </div>
    </section>
  </main>

  <dialog id="settings">
    <form method="dialog" class="sheet">
      <h3>Settings</h3>
      <label class="row">Theme
        <select id="theme">
          <option value="system">System</option>
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="neon">Neon</option>
          <option value="pastel">Pastel</option>
          <option value="quittr">Quittr-style</option>
        </select>
      </label>
      <label class="row">
        <span>Haptics</span>
        <input type="checkbox" id="haptics" checked />
      </label>
      <label class="row">
        <span>Sounds</span>
        <input type="checkbox" id="sounds" checked />
      </label>
      <label class="row">
        <span>FPS Cap</span>
        <select id="fps">
          <option>30</option>
          <option selected>60</option>
          <option>90</option>
        </select>
      </label>
      <menu>
        <button id="btnReset" class="danger" type="button">Reset Progress</button>
        <button value="close" class="primary">Close</button>
      </menu>
    </form>
  </dialog>

  <section id="tutorial" class="card tutorial hidden">
    <header><h2 id="tTitle">How to Play</h2></header>
    <div id="tBody" class="tutorial-body"></div>
    <footer><button id="btnTutClose" class="btn">Close</button></footer>
  </section>

  <div id="toast"></div>

  <script src="app.js"></script>
  <script>
    if('serviceWorker' in navigator){
      window.addEventListener('load', ()=>{
        navigator.serviceWorker.register('sw.js').catch(console.warn);
      });
    }
  </script>
</body>
</html>
