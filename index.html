<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#101317" />
  <title>MindGym</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">MindGym</div>
    <div class="stats">
      <span>Lvl <b id="level">1</b></span>
      <span>XP <b id="xp">0</b></span>
      <span>Streak <b id="streak">0</b></span>
    </div>
    <button id="btnSettings" class="pill">Settings</button>
  </header>

  <main id="home">
    <section class="hero card">
      <h1>Train your mind, daily.</h1>
      <p>Pick a module below. Earn XP, level up, and track streaks. Your progress is saved on your device.</p>
    </section>

    <section class="grid">
      <button class="module card" data-module="focusTap">
        <h2>Focus Tap</h2>
        <p>Tap the highlighted circle quickly.</p>
      </button>

      <button class="module card" data-module="circleHunt">
        <h2>Circle Hunt</h2>
        <p>Find the odd circle among many.</p>
      </button>

      <button class="module card" data-module="visualSpan">
        <h2>Visual Span</h2>
        <p>Repeat the flashing sequence.</p>
      </button>

      <button class="module card" data-module="nBack">
        <h2>N-Back <span class="beta">beta</span></h2>
        <p>Match current to N steps back.</p>
      </button>

      <button class="module card" data-module="matrixMini">
        <h2>Matrix Mini (IQ)</h2>
        <p>Practice Raven-style pattern puzzles.</p>
      </button>
    </section>
  </main>

  <section id="gameScreen" class="hidden">
    <div class="card gameHeader">
      <h2 id="gameTitle">Module</h2>
      <div class="headerBtns">
        <button id="btnHow" class="soft">How?</button>
        <button id="btnExit" class="pill">Exit</button>
      </div>
    </div>

    <div id="gameArea" class="card gameArea"></div>

    <div class="card controls">
      <button id="btnStart" class="primary">Start</button>
      <button id="btnStop" class="soft">Stop</button>
      <div class="scorebox">Score: <b id="score">0</b> &nbsp; Best: <b id="best">0</b></div>
    </div>
  </section>

  <!-- Settings modal -->
  <dialog id="dlgSettings">
    <form method="dialog" class="settings">
      <h3>Settings</h3>

      <label class="row">
        <span>Theme</span>
        <select id="themeSelect">
          <option value="dark">Dark</option>
          <option value="light">Light</option>
          <option value="oled">OLED Black</option>
        </select>
      </label>

      <label class="row">
        <span>Haptics</span>
        <input id="toggleHaptics" type="checkbox" checked>
      </label>

      <label class="row">
        <span>Sounds</span>
        <input id="toggleSounds" type="checkbox" checked>
      </label>

      <label class="row">
        <span>FPS Cap</span>
        <select id="fpsSelect">
          <option value="60">60</option>
          <option value="30">30</option>
        </select>
      </label>

      <div class="buttons">
        <button id="btnReset" type="button" class="danger">Reset Progress</button>
        <button id="btnClose" class="pill">Close</button>
      </div>
    </form>
  </dialog>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>
